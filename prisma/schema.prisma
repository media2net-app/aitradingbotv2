generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("PRISMA_DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")
}

model Log {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  level     String
  symbol    String?
  source    String?
  message   String
}

model Setting {
  id              Int      @id
  riskPercent     Float    @default(2)
  minConfidence   Float    @default(70)
  placeTestTrade  Boolean  @default(false)
  useTrailingStop Boolean  @default(true)
  atrSLFactor     Float    @default(2.5)
  baseRR          Float    @default(2)
  tradingEnabled  Boolean  @default(true)
  updatedAt       DateTime @updatedAt
}

model Connection {
  id              Int      @id @default(autoincrement())
  accountId      Int
  hostname       String
  serverName     String?
  balance        Float
  equity         Float
  margin         Float
  freeMargin     Float
  openTradesCount Int     @default(0)
  floatingProfit Float    @default(0)
  openTrades     Json?
  lastSeen       DateTime
  @@unique([accountId, hostname])
}

